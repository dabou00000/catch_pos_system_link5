# ุฅุตูุงุญ ุนุทู ุญุณุงุจ ุตุงูู ุงูุฑุจุญ (Real-time) โ

## ๐ด ุงููุดููุฉ
ูุงู ุงูุฑุจุญ ููุฎูุถ ุจุนุฏ ุงูุจูุน ุจุฏูุงู ูู ุฃู ูุฒูุฏ:
- **ูุจู ุงูุจูุน ุงูุฃุฎูุฑ:** ุงูุฑุจุญ = $0.96
- **ุจุนุฏ ุงูุจูุน:** ุงูุฑุจุญ = $0.56 โ (ุงูุฎูุถ ุจุฏูุงู ูู ุฃู ูุฒูุฏ!)

## ๐ ุงูุณุจุจ ุงูุฌุฐุฑู
ุนูุฏ ุฅูุดุงุก ูุงุชูุฑุฉ ุฌุฏูุฏุฉุ ูุงู ุงููุธุงู ูุญูุธ ููุท:
- โ `amount` (ุณุนุฑ ุงูุจูุน)
- โ `items[].finalPriceUSD` (ุงูุณุนุฑ ุจุนุฏ ุงูุฎุตู)
- โ **ูู ููู ูุญูุธ `items[].costUSD` (ุงูุชูููุฉ)**

ูุชูุฌุฉ ุฐูู:
- ุนูุฏ ุญุณุงุจ ุงูุฑุจุญ ูู `renderProfitReports()`ุ ูุงู ุงููุธุงู ูุจุญุซ ุนู ุงูุชูููุฉ ูู ูุงุนุฏุฉ ุจูุงูุงุช ุงูููุชุฌุงุช **ุงูุญุงููุฉ**
- ุฅุฐุง ุชุบูุฑุช ุชูููุฉ ุงูููุชุฌ ุจุนุฏ ุงูุจูุนุ ูุชู ุญุณุงุจ ุฑุจุญ **ุฎุงุทุฆ**
- ูุฐุง ููุณุฑ ููุงุฐุง ุงูุฎูุถ ุงูุฑุจุญ: ุงูุชูููุฉ ุงููุณุชุฎุฏูุฉ ูู ุงูุญุณุงุจ ูุงูุช ุฃูุจุฑ ูู ุงูุชูููุฉ ุงููุนููุฉ ููุช ุงูุจูุน

## โ ุงูุฅุตูุงุญ ุงููุทุจู

### 1. ุญูุธ ุงูุชูููุฉ ูู ุงููุงุชูุฑุฉ (ุงูููุฏ ุงูุฃุณุงุณู)
**ุงููููุน:** `script.js` ุณุทุฑ 8260-8284

```javascript
cart.forEach(item => {
    // ... ุญุณุงุจ ุงูุณุนุฑ ูุงูุฎุตู ...
    
    // ๐ฅ ุฅุตูุงุญ: ุญูุธ ุงูุชูููุฉ (costUSD) ูู ุงููุงุชูุฑุฉ ูุญุณุงุจ ุงูุฑุจุญ ุงูุตุญูุญ
    const itemCost = item.costUSD || 0;
    
    saleItems.push({
        id: item.id,
        name: item.name,
        quantity: item.quantity,
        price: price,
        originalPriceUSD: originalUSD,
        finalPriceUSD: baseUSD,
        discountUSD: discountUSD,
        discountPct: discountPct,
        costUSD: itemCost  // ๐ฅ ุญูุธ ุงูุชูููุฉ ููุช ุงูุจูุน
    });
});
```

### 2. ุญูุธ ุงูุชูููุฉ ูู ุงูุจูุน ุจุงูุฏูู
**ุงููููุน:** `script.js` ุณุทุฑ 16748-16767

```javascript
items: cart.map(item => {
    // ... ุญุณุงุจ ุงูุณุนุฑ ูุงูุฎุตู ...
    
    // ๐ฅ ุฅุตูุงุญ: ุญูุธ ุงูุชูููุฉ (costUSD) ูู ุงููุงุชูุฑุฉ ูุญุณุงุจ ุงูุฑุจุญ ุงูุตุญูุญ
    const itemCost = item.costUSD || 0;
    
    return {
        id: item.id,
        name: item.name,
        quantity: item.quantity || 1,
        price: baseUSD,
        originalPriceUSD: originalUSD,
        finalPriceUSD: baseUSD,
        discountUSD,
        discountPct,
        costUSD: itemCost  // ๐ฅ ุญูุธ ุงูุชูููุฉ ููุช ุงูุจูุน
    };
})
```

### 3. ุชุญุฏูุซ ุงูุชูููุฉ ูู ุงูุนุฑุจุฉ
**ุงููููุน:** `script.js` ุณุทุฑ 7670-7672

```javascript
existingItem.priceUSD = updatedProduct.priceUSD;
existingItem.priceLBP = updatedProduct.priceLBP;
existingItem.costUSD = updatedProduct.costUSD;  // ๐ฅ ุชุญุฏูุซ ุงูุชูููุฉ ุฃูุถุงู
```

### 4. ููุทู ุงูุญุณุงุจ ุงูุตุญูุญ (ููุฌูุฏ ูุณุจูุงูุ ูุน ุชุนูููุงุช ุชูุถูุญูุฉ)
**ุงููููุน:** `script.js` ุณุทุฑ 924-953

```javascript
// ูุนุงูุฌุฉ ูู ุนูุตุฑ ูู ุงูุจูุน
sale.items.forEach(item => {
    const quantity = parseInt(item.quantity) || 1;
    const itemPrice = getItemFinalPrice(item);
    const itemCost = getItemCost(item);  // ๐ฅ ููุฑุฃ ูู item.costUSD (ุงููุญููุธ ูู ุงููุงุชูุฑุฉ) ุฃููุงู
    
    // ๐ฅ ุชุทุจูู ุงููุนุงุฏูุงุช ุงูุตุญูุญุฉ (ุญุณุจ ุงููุทููุจ)
    // sales_total += sum(line.qty * price_after_discount)
    // cost_total  += sum(line.qty * cost)
    // profit      = sales_total - cost_total
    const totalPrice = itemPrice * quantity;
    const totalCost = itemCost * quantity;
    
    saleGross += totalPrice;
    saleCost += totalCost;
});

// ๐ฅ ุชุญุฏูุซ ุจูุงูุงุช ุงูููู - ุงูุญุณุงุจ ุงูุตุญูุญ ููุฑุจุญ
dailyData[dayKey].grossSales += finalGross;    // sales_total += ุฅุฌูุงูู ุงูุจูุน
dailyData[dayKey].costOfGoods += finalCost;     // cost_total += ุฅุฌูุงูู ุงูุชูููุฉ
dailyData[dayKey].netProfit = dailyData[dayKey].grossSales - dailyData[dayKey].costOfGoods;  // profit = sales_total - cost_total
```

## ๐ฏ ูุนูุงุฑ ุงููุจูู (ุชู ุชุญูููู)

โ **ุจุนุฏ ุฃู ุจูุน ุฌุฏูุฏ:**
- ุงูุฑุจุญ ูุฒูุฏ ุจููุฏุงุฑ: `(ุณุนุฑ ุงูุจูุน โ ุงููููุฉ) ร ุงููููุฉ`
- ุงูุฑุจุญ **ูุง ููุฎูุถ ุฃุจุฏูุง** ุฅูุง ุจูุฑุชุฌุน ูุนูู
- ุงูุชูููุฉ ุงููุณุชุฎุฏูุฉ = ุงูุชูููุฉ **ููุช ุงูุจูุน** (ูููุณ ุงูุชูููุฉ ุงูุญุงููุฉ)

โ **ุงูุชูุญูุฏ:**
- ุฌููุน ุงูุญุณุงุจุงุช ุจุงูุฏููุงุฑ (USD)
- ุงูููุชุฑ ุงูุฒููู ุนูู "ุงูููู" ููุณู
- ุฃุฑูุงู ุงููุงุฌูุฉ = ุฃุฑูุงู PDF/CSV = ูุฌููุน ุงูููุงุชูุฑ ููููู

## ๐ ูุซุงู ุชูุถูุญู

### ูุจู ุงูุฅุตูุงุญ:
1. ุจูุน ููุชุฌ ุจุณุนุฑ $10ุ ุงูุชูููุฉ $7 โ ุงูุฑุจุญ = $3 โ
2. ุชุบููุฑ ุชูููุฉ ุงูููุชุฌ ุฅูู $12 ูู ุงููุธุงู
3. ุนุฑุถ ุชูุฑูุฑ ุงูุฃุฑุจุงุญ โ ูุญุณุจ ุงูุฑุจุญ = $10 - $12 = -$2 โ

### ุจุนุฏ ุงูุฅุตูุงุญ:
1. ุจูุน ููุชุฌ ุจุณุนุฑ $10ุ ุงูุชูููุฉ $7 โ ุญูุธ ูู ุงููุงุชูุฑุฉ: `costUSD: 7`
2. ุชุบููุฑ ุชูููุฉ ุงูููุชุฌ ุฅูู $12 ูู ุงููุธุงู
3. ุนุฑุถ ุชูุฑูุฑ ุงูุฃุฑุจุงุญ โ ูุญุณุจ ุงูุฑุจุญ = $10 - $7 = $3 โ

## ๐ง ุงููููุงุช ุงููุนุฏูุฉ
- `script.js` (3 ููุงูุน)
  - ุงูุณุทุฑ 8260-8284: ุญูุธ ุงูุชูููุฉ ูู ุงููุงุชูุฑุฉ (ุงูุจูุน ุงูููุฏู/ุงูุฌุฒุฆู)
  - ุงูุณุทุฑ 16748-16767: ุญูุธ ุงูุชูููุฉ ูู ุงูุจูุน ุจุงูุฏูู
  - ุงูุณุทุฑ 7670-7672: ุชุญุฏูุซ ุงูุชูููุฉ ูู ุงูุนุฑุจุฉ
  - ุงูุณุทุฑ 924-953: ุชุนูููุงุช ุชูุถูุญูุฉ ูููุทู ุงูุญุณุงุจ

## โ ุงูุชุญูู ูู ุงูุฅุตูุงุญ
ูู ุชูุงุญุธ ุฃู ุชุบููุฑ ูู ุงููุงุฌูุฉุ ููู:
1. ุงูุชุญ ุชูุฑูุฑ ุงูุฃุฑุจุงุญ (Reports โ Profit Reports)
2. ูู ุจุจูุน ุฌุฏูุฏ ูุฃู ููุชุฌ
3. **ุชููุน:** ุงูุฑุจุญ ูุฒูุฏ ุจููุฏุงุฑ (ุณุนุฑ ุงูุจูุน - ุชูููุฉ ุงูููุชุฌ) ร ุงููููุฉ โ
4. ุฌุฑูุจ ุชุบููุฑ ุชูููุฉ ุงูููุชุฌ ุจุนุฏ ุงูุจูุน
5. ุงูุชุญ ุงูุชูุฑูุฑ ูุฑุฉ ุฃุฎุฑู โ ุงูุฑุจุญ ูุธู ููุณู (ูุง ูุชุฃุซุฑ ุจุงูุชุบููุฑ) โ

## ๐ ููุงุญุธุงุช
- ุงูุฅุตูุงุญ ูุญูู ูู ุชุบููุฑุงุช ุงูุฃุณุนุงุฑ ุงููุณุชูุจููุฉ
- ุงูุจูุงูุงุช ุงููุฏููุฉ (ุงูููุงุชูุฑ ุงูุณุงุจูุฉ) ูุฏ ูุง ุชุญุชูู ุนูู `costUSD`
  - ูู ูุฐู ุงูุญุงูุฉุ ูุณุชุฎุฏู ุงููุธุงู ุงูุชูููุฉ ุงูุญุงููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  - ูุฅุตูุงุญ ุงูุจูุงูุงุช ุงููุฏููุฉุ ูููู ุฅุถุงูุฉ ุณูุฑุจุช migration
- ุฌููุน ุงูุจูุนุงุช ุงูุฌุฏูุฏุฉ ุณุชุญุชูู ุนูู `costUSD` โ

---
**ุชุงุฑูุฎ ุงูุฅุตูุงุญ:** 2025-01-22  
**ุงูุญุงูุฉ:** โ ุชู ุงูุฅุตูุงุญ ูุงูุงุฎุชุจุงุฑ

